# POLARDB公测版迁移至商用版 {#concept_hwb_wpk_xdb .concept}

本文介绍如何使用[数据传输服务（DTS）](https://help.aliyun.com/document_detail/26592.html)迁移公测版POLARDB数据库到商用版POLARDB数据库。本迁移操作免费。

## 前提条件 {#section_e5z_1rk_xdb .section}

**设置IP白名单**

迁移前，您需要为源POLARDB集群和目的POLARDB集群设置IP白名单。操作如下：

1.  进入[POLARDB控制台](https://polardb.console.aliyun.com/)。
2.  单击实例ID或集群ID，进入详细信息页面。
3.  在访问信息区域，单击白名单列表后面的![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13787/3689_zh-CN.png)图标，在弹出的对话框中添加IP地址0.0.0.0/0（表示允许所有IP地址访问该集群）。

**说明：** 迁移完成后，需要将IP地址0.0.0.0/0从源数据库和目标数据库的IP白名单中移除。

**创建数据库账号**

迁移前，您需要为源POLARDB集群和目的POLARDB集群创建数据库账号。您可以创建初始账号，具体操作请参考[创建数据库集群的初始账号](ZH-CN_TP_3016_V1.dita)。

**停止数据写入**

为保证迁移数据一致性，在开始迁移前，需停止写入数据到源实例。

## 迁移步骤 {#section_yww_nrk_xdb .section}

1.  进入[DTS控制台](https://dts.console.aliyun.com/)。
2.  在左侧导航栏选择**数据迁移**，然后在右上角单击**创建迁移任务**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13787/3682_zh-CN.png)

3.  （可选）填写任务名称。

    DTS 为每个任务自动生成一个任务名称，任务名称没有唯一性要求。您可以根据需要修改任务名称，建议为任务配置具有业务意义的名称，便于后续的任务识别。

4.  按如下说明填写源数据库和目标数据库的信息。

    -   实例类型：选择**有公网IP的自建数据库**
    -   实例地区：选择POLARDB实例所在的地域。
    -   数据库类型：选择 **MySQL**。
    -   主机名或IP地址：输入POLARDB集群的公网连接串。您可以参考[查看数据库连接串](ZH-CN_TP_3018_V1.dita)。
    -   端口：输入3306
    -   数据库账号：POLARDB数据库实例的账号。
    -   数据库密码：以上账号的密码。
    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13787/3683_zh-CN.png)

5.  单击右下角的**授权白名单并进入下一步**。
6.  选择**迁移类型**和**迁移对象**。
    -   **迁移类型**：选择**结构迁移**和**全量数据迁移**。（暂不支持增量迁移。）为保证迁移数据一致性，在开始迁移前，需停止写入数据到源实例。
        -   结构迁移

            DTS 会将迁移对象的结构定义迁移到目标实例。目前 DTS 支持结构迁移的对象包括：表。其他对象如视图、同义词、触发器、存储过程、存储函数、包、自定义类型等暂不支持。

        -   全量数据迁移

            DTS 会将源数据库迁移对象的存量数据全部迁移到目标实例。

    -   **迁移对象**：选择要迁移的对象，单击向右的箭头，将选中的对象添加到右侧。迁移对象的选择粒度细化为：库、表、列三个粒度。

        **说明：** 暂时不支持对系统表的迁移。

7.  单击右下角的**预检查并启动**。

    如果预检查失败，可以点击具体检查项后的检查结果，查看具体的失败详情，并根据失败原因修复后，重新进行预检查。

8.  确认DTS购买信息，阅读并勾选**服务条款**，单击**立即购买并启动**。
9.  单击目标地域，查看迁移状态。迁移完成时，状态为**已完成**。

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13787/3685_zh-CN.png)

    **说明：** 迁移完成后，需要将IP地址0.0.0.0/0从源数据库和目标数据库的IP白名单中移除。


